<style>
	.drug {
		margin-bottom: 10px;
	}
</style>
<modal #modal [id]="'register'" [size]="'md'" [title]="'ผลลัพธ์การสมัคร'" (modalSuccess)="goBack()" [success]="'ตกลง'" [enableCancel]="false">
    สมัครสำเร็จ
</modal>
<div class="bg">
<div *ngIf="router.url != '/p_register'">
<a class="back" (click)="goBack()">< ย้อนกลับ</a>
<hr>
</div>

<div class="container">
    <div class="card">
        <h3 class="card-header">ลงทะเบียนผู้ป่วยใหม่</h3>
        <div class="card-block">
            <h4 class="card-title">ข้อมูลส่วนตัว</h4>
            <hr>
            <div class="info">
                <div class="form-group row">
                    <label class="col-sm-2" for="inputTitle">คำนำหน้าชื่อ </label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputTitle" [(ngModel)]="title" placeholder="กรุณากรอกคำนำหน้าชื่อ">
                                            <small class="text-danger">{{errTitle}}</small>    

                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2" for="inputFirstName">ชื่อ</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputFirstName" [(ngModel)]="firstName" placeholder="กรุณากรอกชื่อจริง">
                    <small class="text-danger">{{errfirstName}}</small>    
                    </div>
                </div>
                
                <div class="form-group row">
                    <label class="col-sm-2" for="inputLastName">นามสกุล</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputLastName" [(ngModel)]="lastName" placeholder="กรุณากรอกนามสกุล">
                    <small class="text-danger">{{errlastName}}</small> 
                    </div>
                </div>                               
                    
                <div class="form-group row">
                    <label class="col-sm-2" for="inputSex">เพศ</label>
                    <div class="col-sm-10">
                    <select class="form-control" name="sexSelect" id="sexSelect" [(ngModel)]="sex" required>
                        <option value="no" selected disabled>กรุณาระบุเพศ</option>
                        <option value="male">ชาย</option>
                        <option value="female">หญิง</option>
                    </select>
                                            <small class="text-danger">{{errsex}}</small>    

                    </div>
                </div>
                <div class="form-group row">
                    <label class="col-sm-2" for="inputNationalId">รหัสประจำตัวประชาชน</label>
                    <div class="col-sm-10">
                    <input type="text" class="form-control" id="inputNationalId" [(ngModel)]="nationalID" placeholder="กรุณากรอกรหัสประจำตัวประชาชน 13 หลัก">
                                            <small class="text-danger">{{errnationalID}}</small>    

                    </div>
                </div>
               
                
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputBloodType">กรุ๊ปเลือด</label>
                        <div class="col-sm-10">
                        <select class="form-control"  name="bloodTypeSelect" id="bloodTypeSelect" [(ngModel)]="bloodType" required>
                            <option value="no" selected disabled>กรุณาระบุกรุ๊ปเลือด</option>
                            <option value="A">A</option>
                            <option value="B">B</option>
                            <option value="AB">AB</option>
                            <option value="O">O</option>
                        </select>
                        <small class="text-danger">{{errbloodtype}}</small>    
                        </div>                            
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputBirthDate">วันเกิด</label>
                        <div class="col-sm-10">
                        <input type="date" class="form-control" id="inputBirthDate" [(ngModel)]="birthDate" placeholder="กรุณากรอกวันเกิด วัน-เดือน-ปี">
                                                <small class="text-danger">{{errbirthDate}}</small>    

                        </div>
                    </div>
                
                <div class="form-group row">
                    <div class="col-sm-2">
                        <label for="inputAllegicDrugs">ยาที่แพ้</label>
                    </div>
                    <div class="col-sm-7">
                        <div class="row drug" *ngFor="let elem of allegicDrugsList; let i = index;">
                            <div class="col-xs-10">
                                <select class="form-control" type="text" [ngModel]="elem.drugID" (ngModelChange)="bindsBack($event,i)">
                                    <option *ngFor="let drug of drugs" [selected]="drug.name == elem.drugName" [value]="drug._id">{{drug.name}}</option>
                                </select>
                            </div>
                            <div class="coll-xs-2">
                                <a (click)="deleteAllegicDrugField(i)" ><i  class="fa fa-trash" style="color: #e84234; margin-top: 10px;" aria-hidden="true"></i></a>				
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-3 pull-rigth">
                    <button (click)="addAllegicDrugField()" type="button" class="btn btn-info" style="width: 30%; min-width: 200px"> + เพิ่มรายการยาที่แพ้</button>                  
                    </div>
                </div>
            </div>
        </div>
        <div class="card-block">
            <h4 class="card-title">ข้อมูลการติดต่อ</h4>
            <hr>
            <div class="info">
                
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputPhone">เบอร์โทรศัพท์</label>
                        <div class="col-sm-10">
                        <input type="tel" class="form-control"  id="inputPhone" [(ngModel)]="tel" placeholder="กรุณากรอกเบอร์โทรศัพท์">
                                                <small class="text-danger">{{errtel}}</small>    

                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputEmail">Email</label>
                        <div class="col-sm-10">
                        <input type="email" class="form-control" name="email" id="inputEmail" [(ngModel)]="email" placeholder="กรุณากรอกอีเมล">
                                                <small class="text-danger">{{erremail}}</small>    

                        </div>
                    </div>
               
                
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputHouseNo">ที่อยู่</label>
                        <div class="col-sm-10">
                        <input type="text" class="form-control"  id="inputHouseNo" [(ngModel)]="address" placeholder="กรุณากรอกที่อยู่: บ้านเลขที่ ถนน หมู่">
                        </div>
                    </div>
               
                
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputSubdistrict">แขวง (ตำบล)</label>
                        <div class="col-sm-10">
                        <input type="text" class="form-control" id="inputNationalId" [(ngModel)]="subdistrict" placeholder="กรุณากรอกแขวง (ตำบล)">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputDistrict">เขต (อำเภอ)</label>
                        <div class="col-sm-10">
                        <input type="text" class="form-control"   id="inputDistrict" [(ngModel)]="district" placeholder="กรุณากรอกเขต (อำเภอ)">
                        </div>
                    </div>
               
                
                    <div class="form-group row">
                        <label class="col-sm-2" for="input" >จังหวัด</label>
                        <div class="col-sm-10">
                        <input type="text" class="form-control" id="inputProvince" [(ngModel)]="province" placeholder="กรุณากรอกชื่อจังหวัง">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-2" for="inputPostcode">รหัสไปรษณีย์</label>
                        <div class="col-sm-10">
                        <input type="text" class="form-control"  id="inputPostcode" [(ngModel)]="postCode" placeholder="กรุณากรอกรหัสไปรษณีย์">
                        </div>
                    </div>
              
            </div>
        </div>

        <div class="center">
            <button type="button" class="btn btn-danger center" (click)="goBack()" style="width: 15%; min-width: 150px; margin-right: 10px">ยกเลิก</button>
            <button type="button" class="btn btn-primary center" (click)="register()" style="width: 15%; min-width: 150px;">ลงทะเบียน</button>
        </div>
        <br>
        <br>
    </div>
</div>